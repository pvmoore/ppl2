
import core.intrinsics

public

testIf = {
    ifStatements = {
        var i = 0

        if(true) {
            i = 1
        } else {
            i = 2
        }
        assert i == 1

        if(1 < 0.5) {
            i = 3
        } else if(1 < 1.5) {
            i = 4
        } else {
            i = 5
        }
        assert i == 4
    }
    ifExpressions = {
        var r = if(true) 3 else 4
        assert r == 3
        assert r is byte

        r = if(2>=3) 5 else if(4<3) 6 else 8
        assert r == 8
    }
    initExpression = {
        int r

        if(var a = 1; a > 2) {
            r = a + 0
        } else {
            r = a + 1
        }
        assert r == 2

        var w = if(float f = 3; f is float) {
            f
        } else {
            f + 1
        }
        assert w == 3

        var x = if(var a = false; a) 1 else
                if(bool b = true; b) {
                    2 + a
                } else 3
        assert x == 2
    }
    ifStatements()
    ifExpressions()
    initExpression()
}
