/**
 *  Test accessing struct members.
 */

export testStructs

struct Fruit = [
private
    int a
readonly
    int b = 1   // This initialisation will be moved to 'new' func
public
    bool isABanana

    new = { /* Fruit* this */
        // All struct var initialisers will be put in here
        // This will be called before properties are set manually during initialisation

        b += 3
    }
    foo = { /* Fruit* this */

    }
    bar = { /* Fruit* this, */ int a ->
        struct Vegetable = [bool isGreen]
        isABanana = true
        return a
    }
    baz = { /* Fruit* this, */ bool sing ->
        int loc
        localFunc = {
            // This is a closure
        }

        z += 1

        boo()
    }
    int z
    boo = { /* Fruit* this, */ float inc ->


        this.a += 1
    }
    retThis = {
        return this
    }
]
struct Colour = [
    // new() function created automatically

    new = {}
    new = { int a ->

    }
    new = { int thing, bool a, int b ->

    }
]

int global = 99

testStructs = {
    Fruit t

    t.a += 2

    t.foo()
    t.boo(3.1)

    t.retThis().foo()

    //Colour col
}
